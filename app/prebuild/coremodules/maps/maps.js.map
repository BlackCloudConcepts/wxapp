{"version":3,"sources":["app/coremodules/maps/maps.js"],"names":[],"mappings":"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","file":"app/coremodules/maps/maps.js","sourcesContent":["'use strict';\n(function(){ // START IIFE\n\nangular.module('wxApp.coremodules.maps', ['wxApp.coremodules.conversions'])\n.service('MapsService', MapsService);\nMapsService.$inject = ['ConversionsService'];\n\nfunction MapsService(ConversionsService){\n\n\t// generic mapping function to route to appropriate service\n\t// input: arrCities - array of cities and their related data\n        //      : currentRegion - current region of cities to limit list to and focus map on\n        //      : containerId - div to put the map in   \n\tthis.drawMap = function(arrCities, currentRegion, containerId){\n\t\tthis.drawGoogleMap(arrCities, currentRegion, containerId);\n\t}\n\n\n\t// draws open layer map \n\t// input: arrCities - array of cities and their related data\n        //      : currentRegion - current region of cities to limit list to and focus map on\n        //      : containerId - div to put the map in   \n\tthis.drawOpenLayerMap = function(arrCities, currentRegion, containerId){\n\t\t// filter out cities by region\n                var arr = [];\n                for (var i = 0;i < arrCities.length; i++){\n                        if (arrCities[i].region == currentRegion){\n                                arr.push(arrCities[i]);\n                        }\n                }\n                arrCities = arr;\n\n\t\t// http://www.peterrobins.co.uk/it/olchangingprojection.html\n\t\t//Maps Center \n\t\tvar lat = arrCities[0].coord.lat; \n\t\tvar lon = arrCities[0].coord.lon;\nconsole.log(lat);\nconsole.log(lon);\n//\t\tlat = 7486473;\n//\t\tlon = 4193332;\n\t\tvar lonlat = new OpenLayers.LonLat(lon, lat);\n\t    \tvar map = new OpenLayers.Map(containerId);\n\n\n\t\t// Create overlays\n\n\t\t// OSM layer\n\t    \tvar mapnik = new OpenLayers.Layer.OSM();\n\t\t// stations layer\n\t\tvar stations = new OpenLayers.Layer.Vector.OWMStations(\"Stations\");\n\t\t// weather layer\n\t\tvar city = new OpenLayers.Layer.Vector.OWMWeather(\"Weather\");\n\n\t\t//connect layers to map\n\t\tmap.addLayers([mapnik, stations, city]);\n\n\t\t//Add Layers swither\n\t\tmap.addControl(new OpenLayers.Control.LayerSwitcher());       \t\n\n\t\tmap.setCenter( lonlat, 10 );\n\n\t\t// Add popups \n\t\tvar selectControl = new OpenLayers.Control.SelectFeature([city,stations]);\n\t\tmap.addControl(selectControl);\n\t\tselectControl.activate(); \n\t}\n\n\t// draws google map with markers and popups for indicated locations\n\t// input: arrCities - array of cities and their related data\n\t//      : currentRegion - current region of cities to limit list to and focus map on\n\t//      : containerId - div to put the map in\t\n\tthis.drawGoogleMap = function(arrCities, currentRegion, containerId){\n\t\t// filter out cities by region\n\t\tvar arr = [];\n\t\tfor (var i = 0;i < arrCities.length; i++){\n\t\t\tif (arrCities[i].region == currentRegion){\n\t\t\t\tarr.push(arrCities[i]);\n\t\t\t}\n\t\t}\n\t\tarrCities = arr;\n\n\t\t// draw map\n\t\tvar mapOptions = {\n\t\t\tcenter: { lat: arrCities[0].coord.lat, lng: arrCities[0].coord.lon},\n\t\t\tzoom: 8\n\t\t};\n\t\tvar map = new google.maps.Map(document.getElementById(containerId), mapOptions);\n\t\n\t\t// build any visualization data dynamically\n\t\t// http://geojson.org/geojson-spec.html#linestring\t\n\t\tvar myData = {\n\t\t  \"type\": \"FeatureCollection\",\n\t\t  \"features\": [\n\t\t    {\n\t\t      \"type\": \"Feature\",\n\t\t      \"properties\": {\n\t\t\t\"letter\": \"G\",\n\t\t\t\"color\": \"blue\",\n\t\t\t\"rank\": \"7\",\n\t\t\t\"ascii\": \"71\"\n\t\t      },\n\t\t      \"geometry\": {\n\t\t\t\"type\": \"Polygon\",\n//\t\t\t\"type\": \"MultiLineString\",\n\t\t\t\"coordinates\": [\n\t\t\t  [\n\t\t\t    [123.61, -22.14], [122.38, -21.73], [121.06, -21.69], [119.66, -22.22], [119.00, -23.40],\n\t\t\t    [118.65, -24.76], [118.43, -26.07], [118.78, -27.56], [119.22, -28.57], [120.23, -29.49],\n\t\t\t    [121.77, -29.87], [123.57, -29.64], [124.45, -29.03], [124.71, -27.95], [124.80, -26.70],\n\t\t\t    [124.80, -25.60], [123.61, -25.64], [122.56, -25.64], [121.72, -25.72], [121.81, -26.62],\n\t\t\t    [121.86, -26.98], [122.60, -26.90], [123.57, -27.05], [123.57, -27.68], [123.35, -28.18],\n\t\t\t    [122.51, -28.38], [121.77, -28.26], [121.02, -27.91], [120.49, -27.21], [120.14, -26.50],\n\t\t\t    [120.10, -25.64], [120.27, -24.52], [120.67, -23.68], [121.72, -23.32], [122.43, -23.48],\n\t\t\t    [123.04, -24.04], [124.54, -24.28], [124.58, -23.20], [123.61, -22.14]\n\t\t\t  ]\n\t\t\t]\n\t\t      }\n\t\t    }\n\t\t  ]\n\t\t};\n\n\t\tmap.data.addGeoJson(myData);\n//\t\tmap.data.loadGeoJson('https://storage.googleapis.com/maps-devrel/google.json');\n\n\t\tvar featureStyle = {\n\t\t    fillColor: 'green',\n\t\t    strokeWeight: 1\n\t\t}\n\t\tmap.data.setStyle(featureStyle);\n\n\t\t// add markers\n\t\tvar markers = {};\n\t\tfor (var i = 0;i < arrCities.length;i++){\n\t\t\t(function(){\n\t\t\t\tvar name = arrCities[i].name;\n\t\t\t\tvar temp = ConversionsService.getTemperatureKelvinToFahrenheit(arrCities[i].main.temp);\n\t\t\t\tvar pressure = arrCities[i].main.pressure;\n\t\t\t\tvar humidity = arrCities[i].main.humidity;\n\t\t\t\tvar windspeed = arrCities[i].wind.speed;\n\t\t\t\tvar winddirection = ConversionsService.getWindDirectionDegToText(arrCities[i].wind.deg);\n\t\t\t\tvar contentString = '<div id=\"content\" style=\"width:200px\">'+\n\t\t\t\t\t'<div id=\"bodyContent\">'+\n\t\t\t\t\t'<div>'+name+'</div>'+\n\t\t\t\t\t'<div style=\"font-size:8pt;\">Temperature: '+temp+' &deg;F</div>'+\n\t\t\t\t\t'<div style=\"font-size:8pt;\">Pressure: '+pressure+' mb</div>'+\n\t\t\t\t\t'<div style=\"font-size:8pt;\">Humidity: '+humidity+' %</div>'+\n\t\t\t\t\t'<div style=\"font-size:8pt;\">Wind Speed: '+windspeed+' km/h</div>'+\n\t\t\t\t\t'<div style=\"font-size:8pt;\">Wind Direction: '+winddirection+'</div>'+\n\t\t\t\t\t'</div>'+\n\t\t\t\t\t'</div>';\n\n\t\t\t\tvar infowindow = new google.maps.InfoWindow({\n\t\t\t\t\tcontent: contentString\n\t\t\t\t});\n\n\t\t\t\tvar lat = arrCities[i].coord.lat;\n\t\t\t\tvar lon = arrCities[i].coord.lon;\n\t\t\t\tvar marker = new google.maps.Marker({\n\t\t\t\t\tposition: new google.maps.LatLng(lat,lon),\n\t\t\t\t\tmap: map,\n\t\t\t\t\ttitle:name,\n\t\t\t\t\ticon:'http://cdnimages.magicseaweed.com/30x30/5.png'\n\t\t\t\t});\n\t\t\t\tmarkers[i] = marker;\n\t\t\t\tvar x = i;\n\t\t\t\tgoogle.maps.event.addListener(marker, 'click', function() {\n\t\t\t\t\tinfowindow.open(map,markers[x]);\n\t\t\t\t});\n\t\t\t})();\n\t\t}\n\t}\n       \n}\n\n}\n)(); // END IIFE\n"]}