{"version":3,"sources":["app/datamodules/firebase/firebase.js"],"names":[],"mappings":";AACC,aAAU;;;AAEX,SAAO,CAAC,MAAM,CAAC,4BAA4B,EAAE,CAAC,UAAU,CAAC,CAAC,CACzD,OAAO,CAAC,qBAAqB,EAAE,mBAAmB,CAAC,CAAC;qBAClC,CAAC,OAAO,GAAG,CAAC,IAAI,CAAC,CAAC;;WAE5B,mBAAmB,CAAC,EAAE,EAAC;AAC/B,QAAI,IAAI,GAAG,IAAI,CAAC;;AAEhB,QAAI,WAAW,GAAG,IAAI,QAAQ,CAAC,kDAAkD,CAAC,CAAC;;;;;;AAMnF,QAAI,CAAC,cAAc,GAAG,UAAS,QAAQ,EAAC;AACvC,UAAI,OAAO,GAAG,OAAO,EAAE,CAAC;AACV,aAAO,CAAC,IAAI,CAAC,UAAS,OAAO,EAAE;AAC5C,gBAAQ,CAAC,OAAO,CAAC,CAAC;OACJ,EAAE,UAAS,KAAK,EAAE;AACX,aAAK,CAAC,UAAU,GAAG,KAAK,CAAC,CAAC;OACjC,CAAC,CAAC;;AAEjB,eAAS,OAAO,GAAE;AACjB,YAAI,QAAQ,GAAG,EAAE,CAAC,KAAK,EAAE,CAAC;AAC1B,mBAAW,CAAC,IAAI,CAAC,OAAO,EAAE,UAAS,QAAQ,EAAE;AAC5C,cAAI,OAAO,GAAG,QAAQ,CAAC,GAAG,EAAE,CAAC;AAC7B,kBAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;SAC1B,CAAC,CAAC;AACH,eAAO,QAAQ,CAAC,OAAO,CAAC;OACxB,CAAC;KACF,CAAC;;;;;AAKF,QAAI,CAAC,UAAU,GAAG,UAAS,QAAQ,EAAC;AACnC,iBAAW,CAAC,EAAE,CAAC,eAAe,EAAE,UAAS,QAAQ,EAAE;AAC7B,YAAI,OAAO,GAAG,QAAQ,CAAC,GAAG,EAAE,CAAC;AAClD,gBAAQ,CAAC,OAAO,CAAC,CAAC;OAClB,CAAC,CAAC;KACH,CAAC;GACF;CAEA,CAAA,EACE,CAAC","file":"app/datamodules/firebase/firebase.js","sourcesContent":["'use strict';\n(function(){ // START IIFE\n\nangular.module('wxApp.datamodules.firebase', ['firebase'])\n.service('FirebaseDataService', FirebaseDataService);\nFirebaseDataService.$inject = ['$q'];\n\nfunction FirebaseDataService($q){\n\tvar self = this;\n\n\tvar firebaseObj = new Firebase(\"https://resplendent-heat-1209.firebaseio.com/wx/\");\n\n\t// returns the full dataset for the current weather data\n\t// in using promises it keeps the process in the digest cycle\n\t// input: callback function\n\t// output: calls callback function with data\t\n\tthis.getFullDataset = function(callback){\n\t\tvar promise = getOnce();\n                promise.then(function(message) {\n\t\t\tcallback(message);\n                }, function(error) {\n                        alert('Failed: ' + error);\n                });\n\n\t\tfunction getOnce(){\n\t\t\tvar deferred = $q.defer();\n\t\t\tfirebaseObj.once('value', function(snapshot) {\n\t\t\t\tvar message = snapshot.val();\n\t\t\t\tdeferred.resolve(message);\n\t\t\t});\n\t\t\treturn deferred.promise;\n\t\t};\t\t\n\t};\n\n\t// returns any updates to the full dataset\n\t// input: callback function\n\t// output: calls callback function with data\n\tthis.getUpdates = function(callback){\n\t\tfirebaseObj.on('child_changed', function(snapshot) {\n                        var message = snapshot.val();\n\t\t\tcallback(message);\n\t\t});\n\t};\n}\n\n}\n)(); // END IIFE\n"]}