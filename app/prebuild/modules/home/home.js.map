{"version":3,"sources":["app/modules/home/home.js"],"names":[],"mappings":"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","file":"app/modules/home/home.js","sourcesContent":["'use strict';\n(function(){ // START IIFE\n\nangular.module('wxApp.modules.home', ['ngRoute','firebase', 'wxApp.coremodules.cookies', 'wxApp.coremodules.conversions', 'wxApp.datamodules.firebase', 'wxApp.coremodules.maps', 'wxApp.directivemodules.search'])\n \n// Declared route \n.config(['$routeProvider', function($routeProvider) {\n    $routeProvider.when('/home', {\n        templateUrl: 'modules/home/home.html'//,\n//        controller: 'HomeCtrl' (removed since the html was also referencing the controller causing it to happen twice)\n    });\n}])\n \n// Define controller, services, factories, providers, filters\n.controller('HomeController', HomeController)\n.service('FirebaseFeedService', FirebaseFeedService)\n.filter('TemperatureFilter', TemperatureFilter)\n.filter('WindDirectionFilter', WindDirectionFilter);\n\n// Dependency injections to controller, services, factories, providers, filters\nHomeController.$inject =  ['$scope', 'FirebaseFeedService', 'CookiesService', 'MapsService'];\nFirebaseFeedService.$inject = ['FirebaseDataService', 'MapsService'];\nTemperatureFilter.$inject = ['ConversionsService'];\nWindDirectionFilter.$inject = ['ConversionsService'];\n\n// -- Function defining HomeController\n// input : FirebaseFeedService\n// \t : scope\nfunction HomeController($scope, FirebaseFeedService, CookiesService, MapsService) {\n\tvar self = this;\n\tthis.currentRegion = 'TX';\n\tthis.headers = ['Name','Temperature','Pressure','Humidity','Wind Speed','Wind Direction'];\n\tthis.sortOrderItems = ['+name', '+main.temp', '+main.pressure', '+main.humidity', '+wind.speed', '+wind.deg'];\n\tthis.sortOrder = this.sortOrderItems[0];\n\n\tthis.testCookie = function(){\n\t\tif (CookiesService.getCookie('username') != ''){\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tif (this.testCookie()){\n\t\tFirebaseFeedService.feed($scope, self);\n\t} else {\n\t\tlocation = '#login';\t\n\t}\n\n\tthis.switchRegion = function(evt, region){\n\t\tevt.stopPropagation();\n\t\tself.currentRegion = region;\n\t\tMapsService.drawMap(self.cities, self.currentRegion, 'map-canvas');\n\t};\n\n\tthis.doSort = function(index){\n\t\tif (self.sortOrder == self.sortOrderItems[index]){\n\t\t\tif (self.sortOrder.indexOf('+') != -1){\n\t\t\t\t// switch current column to sort desc\n\t\t\t\tself.sortOrder = self.sortOrder.replace('+','-');\n\t\t\t} else {\n\t\t\t\t// switch current column to sort asc\n\t\t\t\tself.sortOrder = self.sortOrder.replace('-','+');\n\t\t\t}\n\t\t} else {\n\t\t\t// order by new column asc\n\t\t\tself.sortOrder = self.sortOrderItems[index];\n\t\t}\n\t\tdocument.getElementById('cityTable').scrollTop = 0;\n\t};\n}\n\n// -- Function defining FirebaseFeedService\n// input : $q promise\nfunction FirebaseFeedService(FirebaseDataService, MapsService){\n\tvar self = this;\n\n\t// public functions\n\tthis.feed = function($scope, callback){\n\t\tvar arrCities = [];\n\n\t\tvar callbackFullDataset = function(message){\n\t\t\t// convert obj to array\n                        Object.keys(message).forEach(function(key) {\n                                arrCities.push(message[key]);\n                        });\n\n                        callback.cities = arrCities;\n\t\t\tMapsService.drawMap(arrCities, callback.currentRegion, 'map-canvas');\n\t\t};\n\t\tFirebaseDataService.getFullDataset(callbackFullDataset);\n\n\t\tvar callbackUpdates = function(message){\n\t\t\tfor (let i = 0;i < arrCities.length;i++){\n                                if (message.name == arrCities[i].name){\n                                        $scope.$apply(function(){\n                                                arrCities[i] = message;\n                                                document.getElementById('map-canvas').innerHTML = '';\n\t\t\t\t\t\tMapsService.drawMap(arrCities, callback.currentRegion, 'map-canvas');\n                                        });\n                                }\n                        }\n\t\t};\n\t\tFirebaseDataService.getUpdates(callbackUpdates);\n\t};\n}\n\n// -- Function defining TemperatureFilter\n// input : ref to ConversionService\n// output : \nfunction TemperatureFilter(ConversionsService){\n\treturn function(kelvin){\n\t\treturn ConversionsService.getTemperatureKelvinToFahrenheit(kelvin);\n\t};\n}\n\n// -- Function defining WindDirectionFilter\n// input : ref to ConversionService\n// output :\nfunction WindDirectionFilter(ConversionService){\n\treturn function(deg){\n\t\treturn ConversionService.getWindDirectionDegToText(deg);\n\t};\n}\n\n})(); // END IIFE\n"]}